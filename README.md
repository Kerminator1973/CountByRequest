# CountByRequest - пример реализации приложения для получения результатов дневной выручки

Приведённый демонстрационный пример иллюстрирует возможность отправить из банковской системы запрос начала пересчёта наличных.

Для проведения демонстрации необходимо:

- запустить имитацию банковской системы, в которую будут передаваться результаты пересчёта в виде JSON-документа
- запустить desktop-приложение CountByRequest
- запустить браузер (локально) и в строке ввода url ввести: `http://localhost:8080'

Встроенный в desktop-приложение CountByRequest web-сервер обработает запрос и выведен на экран кнопку для завершения пересчёта. Как только кассир закончит пересчёт, этот пересчёт будет направлен в эмулятор банковской системы, как POST-запрос с JSON-документом: `http://localhost:5000/api/data`

## Кратко об архитектуре desktop-приложения

Для создания пользовательского интерфейса используется framework Avalonia.

Для обработки внешних http-запросов, в приложение встроен web-сервер Kestrel и компоненты ASP.NET Core.

Все компоненты являются open-source. Система может работать под Windows 10/11 и Linux.

## Запуск простейшего web-сервера, который имитирует банковскую систему

В папке "serverExpress" находится исходный код на Node.js, который имитирует банковский сервер. Код приложения приведён в файле "server.js". Чтобы запустить сервер необходимо установить Node.js, скачать зависимости и запусить сервер.

Скачать Node.js можно с [официального сайта](https://nodejs.org/en) проекта. Текущая LTS-версия 22.13.1. Следует заметить, что эта сборка не работает на Windows 7 - необходимо использовать Windows 10/11, или Linux.

Запросить версию установленной среды исполнения Node.js:

```shell
node --version
```

Для того, чтобы установить зависимости достаточно выполнить команду:

```shell
npm install
```

Запустить приложение можно командой:

```shell
node server.js
```

В случае, если компания использует прокси-сервер, может потребоваться настроить подключение:

```shell
npm config set proxy http://proxy-server:port
npm config set https-proxy http://proxy-server:port
```

В приведённых выше командах нужно заменить `proxy-server:port` на реальные значения.

Посмотреть корректность настройки можно командами:

```shell
npm config get proxy
npm config get https-proxy
```

При получении запроса, web-сервер выведет информацию о нём в консоль, в которой сервер был запущен.
